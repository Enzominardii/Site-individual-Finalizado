<!DOCTYPE html>
<html lang="pt-br">

<head>
    <link rel="icon" href="../assets/saque.jpeg">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beachlife | Dashboard</title>
    <link rel="stylesheet" href="./../css/dashboards.css">
    <link rel="stylesheet" href="./../css/estilo.css" />
    <script src="../js/sessao.js"></script>
    <script src="./../js/alerta.js"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Exo+2:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://kit.fontawesome.com/9f7414eb10.js" crossorigin="anonymous"></script>
</head>


<body style="background-color: white;">

    <div class="navigation">
        <ul>
            <li>
                <span class="title"
                    style="color: cornsilk; font-size: large; text-align: center;padding-left: 80px; font-size: 30px;"><b>
                        BeachLife</b></span>
            </li><br>
            <li class="list">
                <div class="hello">
                    <h3>Olá, <span id="b_usuario">usuário</span>!</h3>
                </div>
            </li><br>
        
            <li class="list">
                <a href="cards.html">
                    <span class="icon"><ion-icon name="tennisball-outline"></ion-icon></span>
                    <span class="title">Introdução</span>
                </a>
            </li>
            <li class="list">
                <a href="./Quiz.html">
                    <span class="icon"><ion-icon name="clipboard-outline"></ion-icon></span>
                    <span class="title">Quiz basico geral</span>
                </a>
            </li>
            <li class="list">
                <a href="./Quiz2.html">
                    <span class="icon"><ion-icon name="clipboard-outline"></ion-icon></span>
                    <span class="title">Quiz Marcas</span>
                </a>
            </li>
            <li class="list active">
                <a href="./ranking.html">
                    <span class="icon"><ion-icon name="cellular-outline"></ion-icon></span>
                    <span class="title">Gráfico ranking</span>
                </a>
            </li>
            <li class="list">
                <a href="./dashboard.html">
                    <span class="icon"><ion-icon name="cellular-outline"></ion-icon></span>
                    <span class="title">Gráfico</span>
                </a>
            </li>
            <li class="list">
                <a href="mural.html">
                    <span class="icon"> <ion-icon name="chatbubble-ellipses-outline"></ion-icon></span>
                    <span class="title">Mural de mensagens</span>
                </a>
            </li>

            <li class="list">
                <a href="../index.html">
                    <span class="icon"><ion-icon name="exit-outline"></ion-icon></span>
                    <span class="title">Sair</span>
                </a>
            </li>
        </ul>
    </div>

    <div class="content">

<select id="quizSelect" onchange="obterDadosGrafico()" style="margin-left: 10vw;">
    <option value="0" selected> Mostrar grafico</option>
    <option value="1">Ranking Marcas</option>
  </select>
  <div class="graph-container">
    <canvas id="myChartCanvas" class="canvas-container"></canvas>
  </div>
  
  <script src="script.js"></script>
    </div>

</body>
<script>

async function obterDadosGrafico() {
  try {
    const response = await fetch('/api/ranking/grafico');
    const graphData = await response.json();
    plotarGraficoRanking(graphData); 
  } catch (error) {
    console.error('Erro ao obter dados do gráfico:', error);
  }
}

async function plotarGraficoRanking(graphData) {
  try {
    const ctx = document.getElementById('myChartCanvas').getContext('2d');

    new Chart(ctx, {
      type: 'bar',
      data: {
        labels: graphData.labels,
        datasets: [{
          label: 'Pontuação',
          data: graphData.data,
          backgroundColor: 'rgba(0, 0, 255, 0.2)',
          borderColor: 'rgba(0, 0, 255, 1)',
          borderWidth: 1
        }]
      },
      options: {
        title: 'Ranking dos 3 usuários que mais acertaram alternativas',
        xaxis: {
          title: 'Usuário'
        },
        yaxis: {
          title: 'Pontuação'
        }
      }
    });
  } catch (error) {
    console.error('Erro ao obter dados do gráfico:', error);
  }
}
</script>

</html>
<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
